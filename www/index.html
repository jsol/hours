<html>
<head>
<title>Hours report tool</title>
  <link rel="stylesheet" href="css/bootstrap-material-design.min.css"/>
  <link rel="stylesheet" href="css/bootstrap-material-datetimepicker.css" />

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <script src="js/jquery-1.12.3.min.js"></script>

  <script src="js/material.min.js"></script>

  <script type="text/javascript" src="js/moment-with-locales.min.js"></script>

  <script type="text/javascript" src="js/bootstrap-material-datetimepicker.js"></script>
<script>
  function pad(val) {
    return `0${val}`.slice(-2)
  }

  $(document).ready(function() {
  const d = new Date();

  $('#date').val(`${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`)
  $('#date').bootstrapMaterialDatePicker({ weekStart : 1, time: false });

  $('#time').val(`${pad(d.getHours())}:${pad(d.getMinutes())}`)
  $('#time').bootstrapMaterialDatePicker({
    nowButton: true,
    date: false,
    shortTime: false,
    format: 'HH:mm'
  })

  $.material.init()

  $('#save').click(function () {
    const saveDate = new Date($('#date').val() + 'T' + $('#time').val() + ':00')
    const newTime = {
      timestamp: +saveDate,
      shorttime: $('#time').val(),
      year: saveDate.getFullYear(),
      month: saveDate.getMonth() + 1,
      day: saveDate.getDate()
    }

    $.ajax({
      type: 'POST',
      url: 'http://localhost:5500/v1/time',
      data: JSON.stringify(newTime),
      contentType: 'application/json',
      dataType: 'json',
      success: res => {
        console.log(res)
      }
    })
  });

});
</script>
</head>
<body>
<center>
<div>
<input type="text" id="date"  placeholder="Date">
</div>
<div>
<input type="text" id="time"  placeholder="Time">
</div>
<div>
<button id="save">Save</button>
</div>
<div id="feedback"></div>
</center>
</body>
</html>
